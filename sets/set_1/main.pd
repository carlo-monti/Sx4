#N canvas 509 28 1390 969 12;
#X declare -path ../../modules;
#X obj 501 -16 melodic_seq;
#X obj 499 403 chord_seq;
#X obj 769 -355 loadbang;
#X msg 769 -285 \; pd dsp 1;
#X text 2116 413 questa è la pagina principale \, sono caricati due generatori di sequenze e un generatore di accordi. si possono poi caricare come sottoprocesso (con pd~) un synth brds \, una drum machine e un synth fm \, ognuno con il loro set di quatrro effetti. Ad ogni modulo caricato (sequenza \, accordi \, synth \, drummachine \, ...) deve essere assegnato un id che indica la cartella sottu cui verranno salvati i presete. Ad esempio si possono caricare due synth brds a patto di assegnargli due id diversi. Gli effetti caricati con la drum machine e i synth dovranno avere id diversi. Per assegnare un id si manda un msg "set_id 2" ad ognuno. Per asssegnare l'id agli effetti caricati insieme ai synth \, bisogna mandare un messaggio "effects set_id 3". Per salvare i preset si manda un messaggio "save 5" a tutti. Ai moduli che hanno caricato gli effetti bisogna mandare anche un ulteriore messaggio "effects save 5" (i messaggi inviati ai moduli che caricano effetti andranno direttamente al modulo a meno che sia preposto "effects" \, in tal caso andranno all'effetto). Se i moduli sono caricati tramite pd~ \, ai messaggi bisognerà preporre "control" \, se invece si manda il messaggio nell'ultimo inlet \, questo non è necessario. Ad ogni modulo possono essere inviati i messaggi di save e load e DEVE essere inviato il messaggio di set_id all'inizio della patch. In base al tipo di modulo si avranno diversi tipologie di messaggio (i synth hanno input note_in e all_notes_off \, etc.) e i messaggi osc passano tramite l'ultimo inlet oppure il ricevitore "control".;
#X obj 1166 130 s osc_out;
#X obj 1320 558 s osc_out;
#X obj -40 513 s osc_out;
#X obj 385 -155 s osc_out;
#X obj -195 -164 s to_all;
#X obj -128 -164 s osc_out;
#X obj 468 -210 s stop_subproc;
#X obj 468 -244 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 11 -156 s to_all;
#X obj 104 -157 s osc_out;
#X obj 11 -318 main_connection 101 song;
#X obj 501 -45 main_connection 0 seq1;
#X obj 694 -211 s current_path;
#X msg 694 -238 symbol \$1;
#X obj -40 484 pd~ -ninsig 0 -noutsig 4;
#X obj -195 -318 main_connection 100 presets;
#X obj 193 -317 main_connection 102 routing;
#X obj 694 -263 pdcontrol;
#X msg 694 -290 dir;
#X obj 193 -290 main_note_router;
#X obj 13 -292 main_song_handler;
#X obj -195 -291 main_presets_handler;
#X obj -30 256 s to_all;
#X msg -29 189 load 0;
#X msg 27 187 save 0;
#X msg -89 188 init 0;
#X obj 37 513 main_output, f 13;
#X obj 596 -354 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 576 -211 s start_subproc;
#X obj -82 -291 main_osc_handler;
#X obj 924 -322 declare -path ../../modules;
#X obj -40 427 main_note_receiver 1;
#X obj 499 557 main_note_sender 3;
#X obj 502 133 main_note_sender 1;
#X obj 941 557 main_note_sender 4;
#X obj 576 -322 t b b b;
#X obj 599 -266 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 511 -238 s init;
#X obj 511 -295 delay 2000;
#X obj 511 -267 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 413 -354 start and init everything;
#X obj 595 -411 r auto_start;
#X obj 597 -383 delay 1000;
#X obj 598 -294 delay 100;
#X obj -39 454 main_connection_ext_1 drum_machine_wrap.pd 3 dm, f 70;
#X connect 0 0 38 0;
#X connect 0 1 5 0;
#X connect 1 0 37 0;
#X connect 1 1 39 0;
#X connect 1 2 6 0;
#X connect 2 0 3 0;
#X connect 2 0 23 0;
#X connect 12 0 11 0;
#X connect 15 0 25 0;
#X connect 16 0 0 0;
#X connect 18 0 17 0;
#X connect 19 0 7 0;
#X connect 19 1 31 0;
#X connect 19 2 31 1;
#X connect 19 3 31 2;
#X connect 19 4 31 3;
#X connect 20 0 26 0;
#X connect 21 0 24 0;
#X connect 22 0 18 0;
#X connect 23 0 22 0;
#X connect 24 1 8 0;
#X connect 25 0 13 0;
#X connect 25 1 14 0;
#X connect 26 0 9 0;
#X connect 26 1 10 0;
#X connect 28 0 27 0;
#X connect 29 0 27 0;
#X connect 30 0 27 0;
#X connect 32 0 40 0;
#X connect 36 0 49 0;
#X connect 40 0 43 0;
#X connect 40 1 48 0;
#X connect 40 2 23 0;
#X connect 41 0 33 0;
#X connect 43 0 44 0;
#X connect 44 0 42 0;
#X connect 46 0 47 0;
#X connect 47 0 32 0;
#X connect 48 0 41 0;
#X connect 49 0 19 0;
