#N canvas 378 166 1390 715 12;
#X declare -path ../commons;
#X obj 124 -282 inlet;
#X obj 82 -281 inlet;
#X obj 211 371 s wait_length\$0;
#X obj -295 -281 inlet;
#X obj 332 765 r~ envelope\$0;
#X obj 300 796 *~;
#X obj 302 684 *~;
#X obj 301 597 phasor~;
#X obj -234 -281 inlet;
#X msg 347 566 0;
#X obj 39 -281 inlet;
#X obj -706 688 r envelope_length_\$0;
#X obj -766 615 s envelope_length_\$0;
#X text -290 -319 OnOff;
#X obj -99 -281 inlet;
#X obj 455 2266 *~;
#X obj 400 2139 tremolo;
#X obj 946 -306 inlet;
#X obj 995 -304 inlet;
#X obj 172 -281 inlet;
#X text 925 -340 tremfreq;
#X text 985 -340 tremdepth;
#X obj 701 403 s trem_freq_\$0;
#X obj 709 371 s trem_depth_\$0;
#X obj 441 2008 r trem_freq_\$0;
#X obj 513 2072 r trem_depth_\$0;
#X obj 293 54 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 697 53 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 669 53 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 320 51 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 228 52 vradio 20 1 0 5 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X text 106 30 On;
#X text 224 30 Oct;
#X text 289 30 Env;
#X text 257 30 Spr;
#X text 692 29 Dep;
#X text 46 -319 oct;
#X obj 258 54 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 784 -303 inlet;
#X text 664 29 Spd;
#X obj 131 52 vradio 20 1 0 4 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X obj -543 688 r env_shape_\$0;
#X obj 259 288 s env_shape_\$0;
#X obj 347 538 r reset_phase\$0;
#X floatatom 161 52 5 0 0 0 - - - 0;
#X text 192 30 Rev;
#X text 158 30 Len;
#X text -121 -319 loop_length;
#X obj -18 -281 inlet;
#X text -18 -319 reverse;
#X obj 203 52 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 138 307 s reverse_\$0;
#X obj 100 341 s loop_length_\$0;
#N canvas 455 197 1060 688 main_values 0;
#X msg 143 268 1;
#X msg 189 269 2;
#X msg 230 269 4;
#X msg 96 269 0.5;
#X msg 49 269 0.25;
#X msg 234 425 0.25;
#X msg 193 424 0.5;
#X msg 146 425 1;
#X msg 99 425 2;
#X msg 52 425 4;
#X obj 49 219 sel 0 1 2 3 4;
#X obj 317 339 / 4;
#X obj 58 146 inlet;
#X text 53 120 octave(0-4);
#X text 146 338 table length in seconds;
#X text 35 248 -2oct;
#X text 84 247 -1oct;
#X text 221 247 +2oct;
#X text 178 248 +1oct;
#X obj 548 183 inlet;
#X text 376 403 frequency of phasor;
#X obj 316 400 outlet;
#X text 737 164 envelope_offset;
#X obj 729 196 inlet;
#X floatatom 152 562 5 0 0 0 - - - 0;
#X obj 152 509 * 4000;
#X obj 365 367 *;
#X msg 301 248 1;
#X msg 340 247 -1;
#X obj 359 302 t b f;
#X text 337 271 Reverse;
#X text 372 577 envelope_length;
#X text 685 96 1-4 code for each reader;
#X text 277 127 reverse;
#X text 959 260 3 = 1/4 loop;
#X text 959 240 2 = 2/4 loop;
#X text 959 220 1 = 1/2 loop;
#X text 959 200 0 = 4/4 loop;
#X text 961 284 no sync;
#X text 962 308 0 = 0.9;
#X text 962 328 1 = 0.8;
#X text 962 348 2 = 0.7;
#X text 962 368 3 = 0.6;
#X obj 284 149 inlet;
#X text 75 536 full table length in ms;
#X text 517 157 loop_length;
#X text 462 208 (global loop length in ms);
#X text -149 603 I.e. Index 2 is 0 octave: it means that phasor must read a table of 4 seconds length in 4 seconds (at fs=48Khz). It means that its frequency must be 0.25Hz (1 / 4 = 0.25) to read the table at the correct speed. To read the whole table the envelope must last 4 seconds (4000ms);
#X obj 486 575 outlet;
#X text 44 77 This will calculate the phasor speed and the envelope length;
#X obj 650 514 t b f;
#X obj 561 409 *;
#X text 317 614 This is the full length of the recorded loop for each reader (it may be smaller than the whole table length). Each reader has its own offset to create the phasing effect. That is: the envelope length of each reader is different. The envelope length depends also on the octave (the phasor speed).;
#X obj 462 530 *;
#X obj 410 484 t b f;
#X msg 810 369 1;
#X obj 292 193 sel 0 1;
#X obj 896 194 inlet;
#X text 899 167 phase_sync;
#X obj 731 253 + 0;
#X msg 712 342 1;
#X msg 730 365 0.9;
#X msg 749 389 0.8;
#X msg 767 413 0.7;
#X obj 731 293 sel 0 1 2 3 4 5 6 7;
#X obj 882 231 sel 0 1;
#X msg 826 393 0.75;
#X msg 847 416 0.5;
#X msg 865 440 0.25;
#X msg 850 251 0;
#X msg 906 275 4;
#X obj 774 215 t b f;
#X connect 0 0 7 0;
#X connect 0 0 11 0;
#X connect 1 0 6 0;
#X connect 1 0 11 0;
#X connect 2 0 5 0;
#X connect 2 0 11 0;
#X connect 3 0 8 0;
#X connect 3 0 11 0;
#X connect 4 0 9 0;
#X connect 4 0 11 0;
#X connect 5 0 25 0;
#X connect 5 0 54 0;
#X connect 6 0 25 0;
#X connect 6 0 54 0;
#X connect 7 0 25 0;
#X connect 7 0 54 0;
#X connect 8 0 25 0;
#X connect 8 0 54 0;
#X connect 9 0 25 0;
#X connect 9 0 54 0;
#X connect 10 0 4 0;
#X connect 10 1 3 0;
#X connect 10 2 0 0;
#X connect 10 3 1 0;
#X connect 10 4 2 0;
#X connect 11 0 26 0;
#X connect 12 0 10 0;
#X connect 19 0 51 0;
#X connect 23 0 59 0;
#X connect 25 0 24 0;
#X connect 26 0 21 0;
#X connect 27 0 29 0;
#X connect 28 0 29 0;
#X connect 29 0 26 0;
#X connect 29 1 26 1;
#X connect 43 0 56 0;
#X connect 50 0 51 0;
#X connect 50 1 51 1;
#X connect 51 0 53 0;
#X connect 53 0 48 0;
#X connect 54 0 53 0;
#X connect 54 1 53 1;
#X connect 55 0 50 0;
#X connect 56 0 27 0;
#X connect 56 1 28 0;
#X connect 57 0 65 0;
#X connect 59 0 64 0;
#X connect 60 0 50 0;
#X connect 61 0 50 0;
#X connect 62 0 50 0;
#X connect 63 0 50 0;
#X connect 64 0 60 0;
#X connect 64 1 61 0;
#X connect 64 2 62 0;
#X connect 64 3 63 0;
#X connect 64 4 55 0;
#X connect 64 5 66 0;
#X connect 64 6 67 0;
#X connect 64 7 68 0;
#X connect 65 0 69 0;
#X connect 65 1 70 0;
#X connect 66 0 50 0;
#X connect 67 0 50 0;
#X connect 68 0 50 0;
#X connect 69 0 71 0;
#X connect 70 0 71 0;
#X connect 71 0 59 0;
#X connect 71 1 59 1;
#X restore -848 566 pd main_values;
#X f 15;
#X obj -827 445 r reverse_\$0;
#X obj -800 475 r loop_length_\$0;
#X obj 163 274 s octave_\$0;
#X obj -846 414 r octave_\$0;
#X obj -913 612 s phasor_freq_\$0;
#X obj 301 504 r phasor_freq_\$0;
#X text 130 30 ID;
#X obj 242 334 / 25;
#X text -223 -319 id;
#X obj 736 51 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X text 731 27 Vol;
#X obj 1058 -307 inlet;
#X text 1049 -340 volume;
#X obj 455 2305 outlet~;
#X obj 748 291 / 127;
#X obj 843 2310 outlet;
#X obj 843 2280 r loop_length_\$0;
#X obj 65 390 s reader_ID_\$0;
#X obj -764 507 r reader_ID_\$0;
#X obj 688 2279 r reader_ID_\$0;
#X obj 688 2308 outlet;
#X text 107 242 OUTPUT;
#X text 383 242 ID;
#X text 680 239 Loop_length;
#X obj 376 47 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 409 47 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X text 371 23 Tim;
#X text 406 23 Fbk;
#X obj 354 353 s del_time_\$0;
#X obj 366 331 s del_fbk_\$0;
#X text 134 -320 env;
#X text 91 -319 spr;
#X obj -175 -281 inlet;
#X text -197 -319 table_id;
#X obj 301 722 tabread4~;
#X obj -143 -231 s table_id_\$0;
#X obj 418 698 r table_id_\$0;
#X msg 412 730 set loop_\$1;
#X obj 433 390 s del_spd_\$0;
#X obj 383 291 s del_type_\$0;
#X obj 483 339 s del_d/w_\$0;
#X obj 445 49 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 476 49 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 509 49 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X text 440 25 spd;
#X text 471 25 wdt;
#X text 506 25 dw;
#X obj 410 239 hradio 20 1 0 5 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X obj 469 364 s del_dep_\$0;
#X obj 460 621 samplerate~;
#X obj 472 660 * 4;
#X obj 490 574 loadbang;
#X obj 397 1102 filter_selection;
#X obj 389 966 wavefold;
#X text 175 -321 fold;
#X obj 296 422 s fold_\$0;
#X text 314 27 fold;
#X obj 375 868 r fold_\$0;
#X obj 407 891 r stgs_\$0;
#X obj 213 -280 inlet;
#X text 343 24 stg;
#X obj 356 393 s stgs_\$0;
#X obj 831 -303 inlet;
#X obj 880 -303 inlet;
#X obj 575 57 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X text 570 33 Frq;
#X obj 605 55 vsl 20 170 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 530 273 s flt_sel_\$0;
#X obj 596 325 s flt_q_\$0;
#X obj 543 300 s flt_frq_\$0;
#X text 537 29 sel;
#X text 604 27 q;
#X obj 544 48 vradio 20 1 0 8 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X text 779 -340 fltsel;
#X text 827 -340 fltfreq;
#X text 886 -340 fltq;
#X obj 506 982 r flt_sel_\$0;
#X obj 519 1009 r flt_frq_\$0;
#X obj 542 1032 r flt_q_\$0;
#X obj 568 1057 r~ lfo1_fm_\$0;
#X obj 553 2098 r~ lfo2_fm_\$0;
#X obj 1115 -305 inlet;
#X text 1109 -334 lfo2ass;
#X obj 1094 -245 s lfo2_ass_\$0;
#X obj 347 105 vradio 20 1 0 3 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X obj 563 1090 sig~;
#X msg 602 1090 1;
#X obj 636 1089 loadbang;
#X obj 1209 -307 inlet;
#X text 1203 -338 phase_sync;
#X obj 1211 -242 s phase_sync_\$0;
#X obj -659 548 r phase_sync_\$0;
#X obj 825 613 *~;
#X obj 818 552 phasor~;
#X msg 843 520 0;
#X obj 818 459 r phasor_freq_\$0;
#X obj 829 740 tabread4~;
#X obj 944 746 r table_id_\$0;
#X msg 938 778 set loop_\$1;
#X obj 979 525 samplerate~;
#X obj 954 563 * 4;
#X obj 991 488 loadbang;
#X obj 680 864 *~;
#X obj 830 676 +~;
#X obj 961 602 r envelope_length_\$0;
#X obj 843 492 r reset_phase2\$0;
#X obj 735 839 r~ envelope2\$0;
#X obj 960 680 *;
#X obj 1108 668 / 1000;
#X msg 303 -26 64;
#X obj 307 -50 loadbang;
#X obj 228 -57 loadbang;
#X msg 224 -33 2;
#X msg 177 -28 0;
#X obj 95 1042 r reader_ID_\$0;
#X obj 94 1108 + 0;
#X obj 216 1063 sel 0 1;
#X msg 236 1100 4;
#X msg 212 1091 0;
#X obj 217 1039 r phase_sync_\$0;
#X obj 133 1074 t b f;
#X obj 95 1078 f;
#X msg 96 1181 0;
#X obj 97 1150 sel 0 1 2 3 4 5 6 7;
#X msg 163 1262 0;
#X msg 111 1199 0.43;
#X msg 124 1220 0.21;
#X msg 140 1240 0.77;
#X msg 179 1282 0.5;
#X msg 198 1304 0.25;
#X msg 214 1325 0.75;
#X msg -22 1184 1;
#X msg -3 1224 0.85;
#X msg -12 1203 0.93;
#X msg 7 1244 0.77;
#X msg 32 1286 0.5;
#X msg 43 1307 0.25;
#X msg 60 1326 0.75;
#X msg 16 1266 1;
#X obj 159 1369 s phase_offset_\$0;
#X obj 431 2063 t b f;
#X obj 430 2098 *;
#X obj 463 2036 r freq_phase_mult_\$0;
#X obj -62 1370 s freq_phase_mult_\$0;
#X obj 1 349 s mode_\$0;
#X floatatom -687 795 5 0 0 0 - - - 0;
#X floatatom -541 800 5 0 0 0 - - - 0;
#X floatatom -434 785 5 0 0 0 - - - 0;
#X obj 106 53 vradio 20 1 0 4 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0;
#X obj 404 1885 rngs;
#X obj 429 1726 r rngs_trig_\$0;
#X obj 454 1750 r rngs_exc_\$0;
#X obj 471 1776 r rngs_poly_\$0;
#X obj 497 1801 r rngs_pitch_\$0;
#X obj 512 1827 r rngs_transp_\$0;
#X obj 530 1852 r rngs_posit_\$0;
#X obj 608 1722 r rngs_struct_\$0;
#X obj 624 1748 r rngs_bright_\$0;
#X obj 643 1775 r rngs_damp_\$0;
#X obj 657 1800 r rngs_model_\$0;
#X obj 677 1827 r rngs_dw_\$0;
#X obj 369 -159 s rngs_trig_\$0;
#X obj 394 -135 s rngs_exc_\$0;
#X obj 411 -109 s rngs_poly_\$0;
#X obj 437 -84 s rngs_pitch_\$0;
#X obj 452 -58 s rngs_transp_\$0;
#X obj 470 -33 s rngs_posit_\$0;
#X obj 588 -146 s rngs_struct_\$0;
#X obj 604 -120 s rngs_bright_\$0;
#X obj 625 -93 s rngs_damp_\$0;
#X obj 635 -70 s rngs_model_\$0;
#X obj 657 -41 s rngs_dw_\$0;
#X obj 498 -292 inlet;
#X obj 542 -292 inlet;
#X obj 585 -292 inlet;
#X obj 668 -293 inlet;
#X obj 712 -293 inlet;
#X obj 624 -292 inlet;
#X obj 292 -287 inlet;
#X obj 329 -287 inlet;
#X obj 370 -289 inlet;
#X obj 449 -290 inlet;
#X obj 409 -289 inlet;
#X text 552 -323 struct;
#X text 592 -323 bright;
#X text 638 -324 damp;
#X text 678 -321 model;
#X text 475 -322 transp;
#X text 515 -323 posit;
#X text 721 -323 d/w;
#X text 389 -321 poly;
#X text 336 -321 exciter;
#X text 286 -318 trigger;
#X text 434 -323 pitch;
#X obj 255 -283 inlet;
#X text 217 -320 mode;
#X text 259 -323 mix;
#X obj 288 -134 s fold_mix_\$0;
#X obj 466 923 r fold_mix_\$0;
#X obj 1739 -329 inlet~;
#X obj 260 919 r~ direct_in_\$0;
#X text -689 397 mode 0 (no loop) \; mode 1 (normal) \; mode 2 (overlap) \; mode 3 (sync looper): this off;
#X obj -1101 689 r envelope_length_\$0;
#X obj -925 690 r env_shape_\$0;
#N canvas 223 119 1529 816 build_envelope_mode_1 0;
#X floatatom 500 466 5 0 100 0 - - - 0;
#X floatatom 671 400 4 0 1 0 - - - 0;
#X obj 506 562 *;
#X obj 581 561 *;
#X obj 514 500 expr 1 - $f1;
#X obj 635 499 expr 1 - $f1;
#X obj 584 428 t b f;
#X obj 502 369 t f b;
#X obj 531 670 *;
#X obj 585 674 *;
#X obj 500 636 t b f;
#X obj 587 639 t b f;
#X obj 58 429 f;
#X obj 641 670 *;
#X obj 664 639 t b f;
#X obj 531 712 i;
#X obj 585 708 i;
#X obj 641 712 i;
#X obj 547 282 expr 1 - abs($f1 - 0.5) * 2;
#X obj 546 207 / 127, f 7;
#X obj 680 313 min 0.95;
#X obj 469 302 min 0.98;
#X obj 472 328 max 0.02;
#X obj 681 344 max 0.02;
#X obj 401 76 inlet;
#X obj 75 80 inlet;
#X text 69 54 Envelope Length (ms);
#X obj 282 954 outlet;
#X text 184 975 attack ms;
#X text 271 972 decay ms;
#X text 386 975 sustain ms;
#X obj 394 952 outlet;
#X obj 202 949 outlet;
#X obj 402 156 sel 64;
#X obj 396 119 t f f;
#X text 456 153 calculate in percentage;
#X obj 158 621 -;
#X obj 308 384 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 269 504 +;
#X obj 223 415 t b b;
#X text 111 352 calculate with absolute att and decay;
#X obj 187 569 t b f;
#X obj 149 508 spigot;
#X obj 73 510 spigot;
#X obj 239 194 == 64;
#X obj 155 262 == 0;
#X obj 98 306 t b f;
#X obj 197 311 t b f;
#X msg 305 470 4;
#X msg 255 467 4;
#X obj 731 87 inlet;
#X obj 669 169 t b f;
#X msg 686 220 set \$1;
#X text 721 63 fade_loop;
#X text 387 52 Envelope Shape (0-127);
#X text 122 4 receives: envelope length in ms and envelope shape and puts out attack decay and sustain length;
#X connect 0 0 4 0;
#X connect 0 0 2 0;
#X connect 1 0 6 0;
#X connect 1 0 13 0;
#X connect 2 0 8 0;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 3 1;
#X connect 5 0 2 1;
#X connect 6 0 0 0;
#X connect 6 1 5 0;
#X connect 7 0 0 0;
#X connect 7 1 1 0;
#X connect 8 0 15 0;
#X connect 9 0 16 0;
#X connect 10 0 8 0;
#X connect 10 1 8 1;
#X connect 11 0 9 0;
#X connect 11 1 9 1;
#X connect 12 0 43 0;
#X connect 12 0 42 0;
#X connect 13 0 17 0;
#X connect 14 0 13 0;
#X connect 14 1 13 1;
#X connect 15 0 32 0;
#X connect 16 0 27 0;
#X connect 17 0 31 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 19 0 18 0;
#X connect 20 0 23 0;
#X connect 21 0 22 0;
#X connect 22 0 7 0;
#X connect 23 0 1 0;
#X connect 24 0 34 0;
#X connect 25 0 12 0;
#X connect 33 0 37 0;
#X connect 33 1 19 0;
#X connect 34 0 33 0;
#X connect 34 1 44 0;
#X connect 36 0 31 0;
#X connect 37 0 39 0;
#X connect 38 0 41 0;
#X connect 39 0 49 0;
#X connect 39 1 48 0;
#X connect 41 0 36 0;
#X connect 41 1 36 1;
#X connect 42 0 10 0;
#X connect 42 0 11 0;
#X connect 42 0 14 0;
#X connect 43 0 36 0;
#X connect 44 0 45 0;
#X connect 44 0 47 0;
#X connect 45 0 46 0;
#X connect 46 0 12 0;
#X connect 46 1 42 1;
#X connect 47 0 12 0;
#X connect 47 1 43 1;
#X connect 48 0 38 1;
#X connect 48 0 27 0;
#X connect 49 0 38 0;
#X connect 49 0 32 0;
#X connect 50 0 51 0;
#X connect 51 0 37 0;
#X connect 51 1 52 0;
#X connect 52 0 48 0;
#X connect 52 0 49 0;
#X restore -633 752 pd build_envelope_mode_1;
#X msg -438 732 4;
#X obj -789 1264 s~ envelope\$0;
#X obj -492 914 r wait_length\$0;
#X obj -456 935 r envelope_length_\$0;
#X obj -449 1042 s reset_phase\$0;
#N canvas 359 138 1390 805 retrigger_envelope_mode_1 0;
#X obj 163 582 pow~ 2;
#X obj 483 253 i;
#X obj 350 253 i;
#X obj 168 140 t b b b b;
#X obj 250 255 i;
#X obj 293 291 +;
#X obj 238 357 pack f f f f;
#X obj 163 540 vline~;
#X msg 201 291 0;
#X msg 225 413 0 0 \, 1 \$2 1 \, 0 \$4 \$3;
#X obj 287 321 max 2;
#X msg 385 467 \$3;
#X obj 259 45 inlet;
#X obj 388 46 inlet;
#X obj 557 62 inlet;
#X obj 692 61 inlet;
#X obj 760 61 inlet;
#X text 751 29 envelope_length;
#X text 693 31 wait;
#X text 535 23 decay_length;
#X text 390 21 sustain_length;
#X text 261 12 attack_length;
#X obj 95 52 inlet;
#X text 471 220 decay;
#X text 337 226 sustain;
#X text 243 226 attack;
#X obj 147 731 outlet~;
#X obj -23 165 spigot;
#X obj 95 88 sel 0 1;
#X text 35 19 play_envelope (1 or 0);
#X obj 266 729 outlet;
#X text 787 376 when it receives a 1 it collects attack decay and sustain and output an envelope \, retriggering it after wait time. It also sends out a bang for phase retriggering of table reader. It stops retriggering when it receives a 0;
#X text 147 758 envelope;
#X obj 262 552 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 64 123 0;
#X msg 104 124 1;
#X text 232 764 reset phasor (bang);
#X text 785 340 message to vline 1 23 120 is: go to 1 in 23 ms starting at 120 ms from the beginning;
#X obj 639 213 *;
#X obj 722 140 t b f;
#X obj 546 357 +;
#X obj 385 501 t b f;
#X obj 381 548 delay;
#X obj 442 515 +;
#X text 327 591 retrigger;
#X msg 46 325 stop;
#X msg 3 325 0 20;
#X obj 20 282 t b b;
#X obj 418 624 s trig_again_\$0;
#X obj -51 72 r trig_again_\$0;
#X connect 0 0 26 0;
#X connect 1 0 6 3;
#X connect 1 0 40 0;
#X connect 2 0 5 1;
#X connect 3 0 8 0;
#X connect 3 1 4 0;
#X connect 3 2 2 0;
#X connect 3 3 1 0;
#X connect 4 0 5 0;
#X connect 4 0 6 1;
#X connect 5 0 10 0;
#X connect 6 0 9 0;
#X connect 6 0 11 0;
#X connect 7 0 0 0;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 9 0 33 0;
#X connect 10 0 6 2;
#X connect 11 0 41 0;
#X connect 12 0 4 1;
#X connect 13 0 2 1;
#X connect 14 0 1 1;
#X connect 15 0 38 0;
#X connect 16 0 39 0;
#X connect 22 0 28 0;
#X connect 27 0 3 0;
#X connect 28 0 34 0;
#X connect 28 1 3 0;
#X connect 28 1 35 0;
#X connect 33 0 30 0;
#X connect 34 0 27 1;
#X connect 34 0 47 0;
#X connect 35 0 27 1;
#X connect 38 0 40 1;
#X connect 39 0 38 0;
#X connect 39 1 38 1;
#X connect 40 0 43 1;
#X connect 41 0 42 0;
#X connect 41 1 43 0;
#X connect 42 0 48 0;
#X connect 43 0 42 1;
#X connect 45 0 7 0;
#X connect 45 0 42 0;
#X connect 46 0 7 0;
#X connect 47 0 46 0;
#X connect 47 1 45 0;
#X connect 49 0 27 0;
#X restore -621 1007 pd retrigger_envelope_mode_1;
#X text 93 680 full table length in samples;
#X obj -996 1041 s reset_phase\$0;
#X obj -865 1045 s reset_phase2\$0;
#X obj -930 1013 s~ envelope2\$0;
#X floatatom -855 819 5 0 0 0 - - - 0;
#X floatatom -974 815 5 0 0 0 - - - 0;
#X floatatom -1078 817 5 0 0 0 - - - 0;
#X msg 197 437 500;
#N canvas 223 119 1529 816 build_envelope_mode_2 0;
#X obj 401 76 inlet;
#X obj 75 80 inlet;
#X text 69 54 Envelope Length (ms);
#X obj 282 954 outlet;
#X text 184 975 attack ms;
#X text 271 972 decay ms;
#X text 386 975 sustain ms;
#X obj 394 952 outlet;
#X obj 202 949 outlet;
#X obj 158 621 -;
#X obj 187 569 t b f;
#X obj 731 87 inlet;
#X text 721 63 fade_loop;
#X text 387 52 Envelope Shape (0-127);
#X text 122 4 receives: envelope length in ms and envelope shape and puts out attack decay and sustain length;
#X obj 88 219 * 0.5;
#X obj 93 339 t b f;
#X obj 293 333 *;
#X obj 239 283 * 0.5;
#X obj 310 287 t b f;
#X obj 204 532 * 2;
#X obj 401 221 / 127;
#X obj 283 425 max 2;
#X connect 0 0 21 0;
#X connect 1 0 15 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 10 1 9 1;
#X connect 15 0 16 0;
#X connect 15 0 18 0;
#X connect 16 1 9 0;
#X connect 17 0 22 0;
#X connect 18 0 17 0;
#X connect 19 0 17 0;
#X connect 19 1 17 1;
#X connect 20 0 10 0;
#X connect 21 0 19 0;
#X connect 22 0 20 0;
#X connect 22 0 3 0;
#X connect 22 0 8 0;
#X restore -1038 750 pd build_envelope_mode_2;
#N canvas 268 336 1390 805 retrigger_envelope_mode_2 0;
#X obj 79 690 pow~ 2;
#X obj 336 280 i;
#X obj 270 283 i;
#X obj 141 189 t b b b b;
#X obj 170 285 i;
#X obj 238 316 +;
#X obj 121 417 pack f f f f;
#X obj 77 651 vline~;
#X msg 121 321 0;
#X msg 86 510 0 0 \, 1 \$2 1 \, 0 \$4 \$3;
#X obj 179 364 max 2;
#X obj 435 -54 inlet;
#X obj 564 -53 inlet;
#X obj 733 -37 inlet;
#X text 711 -76 decay_length;
#X text 566 -78 sustain_length;
#X text 437 -87 attack_length;
#X obj 218 -90 inlet;
#X text 333 254 decay;
#X text 257 256 sustain;
#X text 163 256 attack;
#X obj 68 736 outlet~;
#X obj 147 149 spigot;
#X obj 276 -21 sel 0 1;
#X text 200 -125 play_envelope (1 or 0);
#X obj 187 734 outlet;
#X text 68 763 envelope;
#X obj 175 686 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X msg 277 17 0;
#X msg 320 18 1;
#X text 153 769 reset phasor (bang);
#X obj 576 754 outlet~;
#X text 583 782 envelope2;
#X obj 688 762 outlet;
#X text 683 784 restphasor2;
#X obj 577 680 vline~;
#X msg 580 528 0 0 \, 1 \$2 1 \, 0 \$4 \$3;
#X obj 686 721 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 578 722 pow~ 2;
#X obj 64 66 r trig_env_1_\$0;
#X obj 633 87 r trig_env_2_\$0;
#X obj 774 292 i;
#X obj 697 290 i;
#X obj 584 211 t b b b b;
#X obj 597 292 i;
#X obj 665 323 +;
#X obj 569 429 pack f f f f;
#X msg 548 328 0;
#X obj 620 389 max 2;
#X text 762 259 decay;
#X text 684 263 sustain;
#X text 590 263 attack;
#X obj 698 427 delay;
#X obj 257 422 delay;
#X obj 256 454 s trig_env_2_\$0;
#X obj 697 462 s trig_env_1_\$0;
#X obj 588 160 spigot;
#X obj 509 589 t b b;
#X msg 495 639 0 20;
#X msg 536 639 stop;
#X obj 486 559 r stop_\$0;
#X obj 14 539 t b b;
#X msg 0 589 0 20;
#X msg 41 589 stop;
#X obj -9 509 r stop_\$0;
#X obj 295 365 r stop_\$0;
#X msg 289 393 stop;
#X obj 749 358 r stop_\$0;
#X msg 743 386 stop;
#X obj 198 18 s stop_\$0;
#X obj 240 97 t b f;
#X connect 0 0 21 0;
#X connect 1 0 6 3;
#X connect 2 0 5 1;
#X connect 3 0 8 0;
#X connect 3 1 4 0;
#X connect 3 2 2 0;
#X connect 3 3 1 0;
#X connect 4 0 5 0;
#X connect 4 0 6 1;
#X connect 5 0 10 0;
#X connect 5 0 53 0;
#X connect 6 0 9 0;
#X connect 7 0 0 0;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 9 0 27 0;
#X connect 10 0 6 2;
#X connect 11 0 4 1;
#X connect 11 0 44 1;
#X connect 12 0 2 1;
#X connect 12 0 42 1;
#X connect 13 0 1 1;
#X connect 13 0 41 1;
#X connect 17 0 23 0;
#X connect 22 0 3 0;
#X connect 23 0 28 0;
#X connect 23 0 69 0;
#X connect 23 1 29 0;
#X connect 27 0 25 0;
#X connect 28 0 22 1;
#X connect 28 0 56 1;
#X connect 29 0 56 1;
#X connect 29 0 70 0;
#X connect 35 0 38 0;
#X connect 36 0 35 0;
#X connect 36 0 37 0;
#X connect 37 0 33 0;
#X connect 38 0 31 0;
#X connect 39 0 22 0;
#X connect 40 0 56 0;
#X connect 41 0 46 3;
#X connect 42 0 45 1;
#X connect 43 0 47 0;
#X connect 43 1 44 0;
#X connect 43 2 42 0;
#X connect 43 3 41 0;
#X connect 44 0 45 0;
#X connect 44 0 46 1;
#X connect 45 0 48 0;
#X connect 45 0 52 0;
#X connect 46 0 36 0;
#X connect 47 0 46 0;
#X connect 48 0 46 2;
#X connect 52 0 55 0;
#X connect 53 0 54 0;
#X connect 56 0 43 0;
#X connect 57 0 58 0;
#X connect 57 1 59 0;
#X connect 58 0 35 0;
#X connect 59 0 35 0;
#X connect 60 0 57 0;
#X connect 61 0 62 0;
#X connect 61 1 63 0;
#X connect 62 0 7 0;
#X connect 63 0 7 0;
#X connect 64 0 61 0;
#X connect 65 0 66 0;
#X connect 66 0 53 0;
#X connect 67 0 68 0;
#X connect 68 0 52 0;
#X connect 70 0 22 0;
#X connect 70 1 22 1;
#X restore -1058 980 pd retrigger_envelope_mode_2;
#X obj -427 685 loadbang;
#X text -405 735 smoothing fade for loop in ms;
#X msg 102 450 2000;
#X text 389 637 set here the max recording time in sec;
#X text 922 543 set here the max recording time in sec;
#X obj 961 632 * 0.5;
#X text 1008 708 play 2nd table from half;
#X obj 1440 386 declare -path ../commons;
#X text -858 1241 they both send to the same envelope 1;
#X obj -1108 899 r mode_\$0;
#X obj -1105 935 == 2;
#X obj -661 929 r mode_\$0;
#X obj -658 965 == 1;
#X obj 1861 -328 inlet~;
#X obj 1986 -331 inlet~;
#X obj 1986 -305 s~ direct_in_\$0;
#X obj 1861 -302 s~ lfo2_fm_\$0;
#X obj 1739 -303 s~ lfo1_fm_\$0;
#X obj 734 331 s master_volume_\$0;
#X obj 521 2236 r master_volume_\$0;
#X obj 414 1434 compressor;
#X obj 1282 -306 inlet;
#X obj 1347 -305 inlet;
#X obj 1418 -307 inlet;
#X obj 1486 -307 inlet;
#X obj 1575 -305 inlet;
#X obj 1641 -306 inlet;
#X text 1285 -331 gain;
#X text 1350 -331 ratio;
#X text 1400 -334 threshold;
#X text 1480 -336 response;
#X text 1551 -332 lookahead;
#X text 1641 -333 rms/peak;
#X obj 1300 -194 s comp_gain_\$0;
#X obj 1374 -227 s comp_ratio_\$0;
#X obj 1456 -187 s comp_thr_\$0;
#X obj 1494 -225 s comp_resp_\$0;
#X obj 1568 -189 s comp_look_\$0;
#X obj 1628 -215 s comp_rms_\$0;
#X obj 519 1218 r comp_gain_\$0;
#X obj 537 1247 r comp_ratio_\$0;
#X obj 551 1277 r comp_thr_\$0;
#X obj 573 1302 r comp_resp_\$0;
#X obj 596 1331 r comp_look_\$0;
#X obj 624 1357 r comp_rms_\$0;
#X connect 0 0 26 0;
#X connect 1 0 37 0;
#X connect 3 0 202 0;
#X connect 4 0 5 1;
#X connect 5 0 107 0;
#X connect 6 0 88 0;
#X connect 7 0 6 0;
#X connect 8 0 40 0;
#X connect 9 0 7 1;
#X connect 10 0 30 0;
#X connect 11 0 258 0;
#X connect 14 0 44 0;
#X connect 15 0 67 0;
#X connect 16 0 15 0;
#X connect 17 0 28 0;
#X connect 18 0 27 0;
#X connect 19 0 29 0;
#X connect 24 0 195 0;
#X connect 25 0 16 2;
#X connect 26 0 42 0;
#X connect 27 0 23 0;
#X connect 28 0 22 0;
#X connect 29 0 109 0;
#X connect 30 0 56 0;
#X connect 37 0 61 0;
#X connect 38 0 126 0;
#X connect 40 0 71 0;
#X connect 41 0 258 1;
#X connect 43 0 9 0;
#X connect 43 0 103 0;
#X connect 44 0 52 0;
#X connect 48 0 50 0;
#X connect 50 0 51 0;
#X connect 53 0 58 0;
#X connect 53 1 12 0;
#X connect 54 0 53 1;
#X connect 55 0 53 2;
#X connect 57 0 53 0;
#X connect 59 0 7 0;
#X connect 61 0 2 0;
#X connect 63 0 68 0;
#X connect 65 0 63 0;
#X connect 68 0 293 0;
#X connect 70 0 69 0;
#X connect 72 0 53 3;
#X connect 73 0 74 0;
#X connect 78 0 82 0;
#X connect 79 0 83 0;
#X connect 86 0 89 0;
#X connect 88 0 5 0;
#X connect 90 0 91 0;
#X connect 91 0 88 0;
#X connect 95 0 92 0;
#X connect 96 0 102 0;
#X connect 97 0 94 0;
#X connect 101 0 93 0;
#X connect 103 0 104 0;
#X connect 104 0 6 1;
#X connect 105 0 103 0;
#X connect 106 0 295 0;
#X connect 107 0 106 0;
#X connect 111 0 107 1;
#X connect 112 0 107 2;
#X connect 113 0 138 0;
#X connect 116 0 118 0;
#X connect 117 0 120 0;
#X connect 118 0 123 0;
#X connect 120 0 122 0;
#X connect 126 0 121 0;
#X connect 130 0 106 1;
#X connect 131 0 106 2;
#X connect 132 0 106 3;
#X connect 133 0 106 4;
#X connect 134 0 16 3;
#X connect 135 0 137 0;
#X connect 138 0 115 0;
#X connect 139 0 106 5;
#X connect 140 0 139 0;
#X connect 141 0 140 0;
#X connect 142 0 144 0;
#X connect 145 0 53 4;
#X connect 146 0 157 0;
#X connect 147 0 146 0;
#X connect 148 0 147 1;
#X connect 149 0 147 0;
#X connect 150 0 156 0;
#X connect 151 0 152 0;
#X connect 152 0 150 0;
#X connect 153 0 154 0;
#X connect 153 0 162 0;
#X connect 154 0 146 1;
#X connect 155 0 153 0;
#X connect 156 0 107 0;
#X connect 157 0 150 0;
#X connect 158 0 280 0;
#X connect 159 0 148 0;
#X connect 159 0 153 0;
#X connect 160 0 156 1;
#X connect 161 0 157 1;
#X connect 162 0 161 1;
#X connect 163 0 26 0;
#X connect 164 0 163 0;
#X connect 165 0 166 0;
#X connect 165 0 167 0;
#X connect 166 0 30 0;
#X connect 167 0 50 0;
#X connect 167 0 40 0;
#X connect 168 0 175 0;
#X connect 169 0 177 0;
#X connect 170 0 172 0;
#X connect 170 1 171 0;
#X connect 171 0 169 1;
#X connect 171 0 174 0;
#X connect 172 0 169 1;
#X connect 172 0 174 0;
#X connect 173 0 170 0;
#X connect 174 0 175 0;
#X connect 174 1 169 1;
#X connect 175 0 169 0;
#X connect 176 0 185 0;
#X connect 176 0 193 0;
#X connect 177 0 176 0;
#X connect 177 1 179 0;
#X connect 177 2 180 0;
#X connect 177 3 181 0;
#X connect 177 4 178 0;
#X connect 177 5 182 0;
#X connect 177 6 183 0;
#X connect 177 7 184 0;
#X connect 178 0 192 0;
#X connect 178 0 193 0;
#X connect 179 0 187 0;
#X connect 179 0 193 0;
#X connect 180 0 186 0;
#X connect 180 0 193 0;
#X connect 181 0 188 0;
#X connect 181 0 193 0;
#X connect 182 0 189 0;
#X connect 182 0 193 0;
#X connect 183 0 190 0;
#X connect 183 0 193 0;
#X connect 184 0 191 0;
#X connect 184 0 193 0;
#X connect 185 0 197 0;
#X connect 186 0 197 0;
#X connect 187 0 197 0;
#X connect 188 0 197 0;
#X connect 189 0 197 0;
#X connect 190 0 197 0;
#X connect 191 0 197 0;
#X connect 192 0 197 0;
#X connect 194 0 195 0;
#X connect 194 1 195 1;
#X connect 195 0 16 1;
#X connect 196 0 194 0;
#X connect 202 0 198 0;
#X connect 203 0 16 0;
#X connect 204 0 203 1;
#X connect 205 0 203 2;
#X connect 206 0 203 3;
#X connect 207 0 203 4;
#X connect 208 0 203 5;
#X connect 209 0 203 6;
#X connect 210 0 203 7;
#X connect 211 0 203 8;
#X connect 212 0 203 9;
#X connect 213 0 203 10;
#X connect 214 0 203 11;
#X connect 226 0 220 0;
#X connect 227 0 221 0;
#X connect 228 0 222 0;
#X connect 229 0 224 0;
#X connect 230 0 225 0;
#X connect 231 0 223 0;
#X connect 232 0 215 0;
#X connect 233 0 216 0;
#X connect 234 0 217 0;
#X connect 235 0 219 0;
#X connect 236 0 218 0;
#X connect 248 0 251 0;
#X connect 252 0 107 3;
#X connect 253 0 292 0;
#X connect 254 0 107 0;
#X connect 256 0 273 0;
#X connect 257 0 273 1;
#X connect 258 0 199 0;
#X connect 258 0 264 1;
#X connect 258 1 200 0;
#X connect 258 1 264 3;
#X connect 258 2 201 0;
#X connect 258 2 264 2;
#X connect 259 0 258 2;
#X connect 261 0 264 4;
#X connect 262 0 264 5;
#X connect 264 0 260 0;
#X connect 264 1 263 0;
#X connect 272 0 52 0;
#X connect 273 0 274 1;
#X connect 273 0 271 0;
#X connect 273 1 274 3;
#X connect 273 1 270 0;
#X connect 273 2 274 2;
#X connect 273 2 269 0;
#X connect 274 0 260 0;
#X connect 274 1 266 0;
#X connect 274 2 268 0;
#X connect 274 3 267 0;
#X connect 275 0 259 0;
#X connect 277 0 52 0;
#X connect 280 0 161 0;
#X connect 284 0 285 0;
#X connect 285 0 274 0;
#X connect 286 0 287 0;
#X connect 287 0 264 0;
#X connect 288 0 291 0;
#X connect 289 0 290 0;
#X connect 294 0 15 1;
#X connect 295 0 203 0;
#X connect 296 0 308 0;
#X connect 297 0 309 0;
#X connect 298 0 310 0;
#X connect 299 0 311 0;
#X connect 300 0 312 0;
#X connect 301 0 313 0;
#X connect 314 0 295 1;
#X connect 315 0 295 2;
#X connect 316 0 295 3;
#X connect 317 0 295 4;
#X connect 318 0 295 5;
#X connect 319 0 295 6;
#X coords 0 715 1 714 670 254 0;
